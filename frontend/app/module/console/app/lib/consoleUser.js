// Generated by CoffeeScript 1.12.7
(function() {
  module.exports = require('../../../../lib/model/user').extend({
    setMeta: function(cb) {
      return $.get(util.restUrl('meta'), function(res) {
        var i, it, j, k, l, len, len1, ref, ref1, ref2;
        ref = res.entities;
        for (j = 0, len = ref.length; j < len; j++) {
          it = ref[j];
          it._ = {};
          ref1 = it.prop;
          for (i = l = 0, len1 = ref1.length; l < len1; i = ++l) {
            k = ref1[i];
            if (k.type) {
              if (k.type.indexOf('_') > -1) {
                ref2 = k.type.split('_'), k.type = ref2[0], k.xtype = ref2[1];
                if (k.type === 'x') {
                  k.type = 'holder';
                }
              }
            } else {
              k.type = 'text';
            }
          }
          meta[it.code] = it;
        }
        return cb();
      });
    },
    afterAuth: function(cb) {
      if (cf.fetchMeta) {
        return this.setMeta(cb);
      } else {
        return cb();
      }
    },
    check: function() {
      if (this.isLogin() && this.hasRole('admin')) {
        return true;
      }
      return false;
    }
  });

}).call(this);

//# sourceMappingURL=consoleUser.js.map
