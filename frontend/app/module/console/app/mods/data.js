// Generated by CoffeeScript 1.12.7
(function() {
  app.enhance({
    routes: {
      '!/data(/:act)(/:entity)(/:p)': '_data'
    },
    _data: function(act, entity, eid) {
      var i, it, len, opt, ref, ref1;
      if (!user.isLogin()) {
        cf.r('login');
        return;
      }
      if (typeof this._data_check === "function") {
        this._data_check();
      }
      if (this.initLayout && user.entities) {
        ref = user.entities;
        for (i = 0, len = ref.length; i < len; i++) {
          it = ref[i];
          if (it.href == null) {
            it.href = util.navUrl('data', 'list', it.key);
          }
        }
        this.initLayout('data', '2-10', (function(_this) {
          return function() {
            return {
              title: iim('m_mgm', 'data'),
              tmpl: 'dataNavItem',
              data: user.entities
            };
          };
        })(this));
      }
      switch (act) {
        case 'list':
          opt = {
            _pagePath: true
          };
          if (eid) {
            ref1 = eid.split('_'), opt.max = ref1[0], opt.offset = ref1[1];
          }
          return this.dm.tb(this._mod_ctn, entity, opt);
        case 'edit':
          return this.dm.edit(this._mod_ctn, entity, eid);
        case 'view':
          return this.dm.view(this._mod_ctn, entity, eid);
        case 'add':
          return this.dm.add(this._mod_ctn, entity);
      }
    }
  });

}).call(this);

//# sourceMappingURL=data.js.map
