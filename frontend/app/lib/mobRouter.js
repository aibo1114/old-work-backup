// Generated by CoffeeScript 1.12.7
(function() {
  var router, uu;

  router = require('./userRouter').extend({
    _exr: [require('./func/mobLogin')],
    wtAutoLogin: true,
    checkAuth: true
  });

  uu = require('./model/wechatUser');

  require('./terminal/mob');

  require('./mob');

  W.ctn = $('#content');

  cf._uOpt = $.extend({
    afterLogin: function() {
      if (cf.__lll === true) {
        return;
      }
      if (this.hasRole('admin')) {
        this.logout();
        return;
      }
      app.btmMenu = new cf.view.btmMenu();
      app.btmMenu.setMenu('user', user.menu);
      return cf.__lll = true;
    },
    check: function() {
      return true;
    }
  }, cf._uOpt);

  cf._rOpt = $.extend({
    checkAuth: true,
    wtAutoLogin: true,
    logoutPath: util.navUrl('login')
  }, cf._rOpt);

  module.exports = function() {
    cf.view.form.prototype.btns = ['save'];
    if (typeof cf._init === "function") {
      cf._init();
    }
    W.user = new uu(cf._uData, cf._uOpt);
    new router(cf._rOpt);
    $('#nav').append('<hr/>');
    return app.menu = new cf.view.topMenu({
      parent: '#nav',
      tagName: 'div',
      className: 'nav navbar-nav',
      css: {
        'padding': '0 10px'
      },
      afterLogin: function() {
        cf.view.topMenu.prototype.afterLogin.call(this);
        return this.$('.dropdown-menu').attr('class', 'nav navbar-nav');
      }
    });
  };

}).call(this);

//# sourceMappingURL=mobRouter.js.map
