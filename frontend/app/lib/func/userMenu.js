// Generated by CoffeeScript 1.12.7
(function() {
  $.extend(module.exports, {
    topBar: '#topbar',
    buildMenu: function() {
      var i, it, k, len, menu, res, v;
      menu = this.menu ? this.menu : this.mgm && this.mgm.menu ? this.mgm.menu : [];
      res = [];
      if (_.isArray(menu)) {
        for (i = 0, len = menu.length; i < len; i++) {
          it = menu[i];
          res.push({
            l: ii(it.key),
            k: it.act,
            i: it.icon,
            href: it.href
          });
        }
      } else {
        for (k in menu) {
          v = menu[k];
          if (_.isObject(v)) {
            res.push({
              l: ii(k),
              k: v.act,
              i: v.icon,
              r: v.row,
              href: v.href
            });
          } else {
            res.push({
              l: ii(k),
              r: v,
              k: v.toString().indexOf(':') > -1 ? v.split(':')[1] : k
            });
          }
        }
        res.sortBy('r', true);
      }
      return res;
    },
    renderMenu: function() {
      var funcs, header, menu, opt, tp;
      $('#topbar').remove();
      if (user.isLogin()) {
        menu = this.buildMenu();
        funcs = this.funcs();
        opt = $.extend({
          menus: menu,
          navStyle: 'navbar-right',
          ulStyle: 'nav navbar-nav',
          funcs: funcs
        }, cf.tp.opt);
        header = $('#header');
        header.append(this.menuTmpl(opt));
        header.on('click', 'li', util.setActive);
        $("[href*='" + (util.atHash(1)) + "']", header).parent().addClass(_st.active);
      }
      if (cf.mob) {
        tp = $('#topbar');
        tp.addClass('collapse');
        opt.ulStyle = 'nav';
        tp.find('.dropdown-menu').attr('class', 'nav navbar-nav').prev().hide();
        if ($('.navbar-header button').length === 0) {
          $('.navbar-header').append(cf.rtp('mobBtn', {
            icon: 'th',
            attrs: {
              "class": 'pull-right',
              'data-toggle': 'collapse',
              href: "#topbar"
            }
          }));
        }
        return tp.find('a').click(function(e) {
          return $('.navbar-header .pull-right').trigger('click');
        });
      }
    }
  });

}).call(this);

//# sourceMappingURL=userMenu.js.map
