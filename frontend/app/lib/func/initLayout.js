// Generated by CoffeeScript 1.12.7
(function() {
  module.exports = function(key, cols, rData) {
    var cn, dd, i, it, len, m, n, ref, res, s, ti;
    if (!$('#side').length || !$("#side ." + key + "Side").length) {
      this.ctn.attr('class', "row " + key).show();
      n = cols.split('-');
      this.ctn.html(util.layout({
        side: "col-md-" + n[0],
        main: "col-md-" + n[1]
      }));
      this._mod_ctn = '#main';
      if (rData) {
        res = rData();
        if (_.isObject(res)) {
          dd = cn = [];
          ref = res.data;
          for (i = 0, len = ref.length; i < len; i++) {
            it = ref[i];
            if (it.key && it.key.startsWith('_')) {
              ti = {
                key: it.key.substr(1),
                data: []
              };
              cn = ti.data;
              dd.push(ti);
            } else {
              if (it.href == null) {
                it.href = util.navUrl(key, it.key);
              }
              cn.push(it);
            }
          }
          this.dm.tag('#side', {
            className: "navbar-collapse collapse row " + key + "Side",
            mode: 'panel',
            data: dd,
            tmpl: 'dataNavItem',
            modeContext: function() {
              return {
                head: true,
                tagClass: 'list-group',
                title: res.title,
                style: 'panel-default'
              };
            }
          });
          $("[href*='" + (util.atHash(3) || util.atHash(2)) + "']", '#side').first().addClass(app.active);
          this.ctn.on('click', 'a', util.setActive);
        }
        if (cf.mob) {
          $('.navbar-header .sideMB').remove();
          $('.navbar-header').prepend(cf.rtp('mobBtn', {
            icon: 'th-list',
            attrs: {
              "class": 'pull-right icon sideMB',
              href: '#side>div',
              'data-toggle': 'collapse'
            }
          }));
          $('#side>div').find('a').click(function() {
            return $('.navbar-header .sideMB').trigger('click');
          });
        } else {
          s = $('#side');
          m = $('#main');
          s.find('.panel-title').prepend(util.icon('chevron-left pull-right btn btn-primary btn-xs closeSide'));
          s.on('click', '.closeSide', (function(_this) {
            return function() {
              var t;
              s.hide();
              cols = m.attr('class');
              m.attr('class', 'col-md-12');
              t = $(util.icon('chevron-right btn btn-primary btn-xs openSide'));
              t.click(function() {
                m.attr('class', cols);
                s.show();
                return t.remove();
              });
              return $('#content').append(t);
            };
          })(this));
        }
      }
      if (cf.mob && location.hash.split('/').length < 3) {
        $('#header button.pull-right').trigger('click');
      }
      return app._site = $('#side');
    }
  };

}).call(this);

//# sourceMappingURL=initLayout.js.map
