// Generated by CoffeeScript 1.12.7
(function() {
  m.menu = {
    prop: [
      _ep('key'), m._text('label', {
        valid: {
          required: true
        }
      }), _ep('icon'), _ep('row'), m._text('act'), m._text('href')
    ],
    listOpt: {
      itemBtns: ['showInTd', 'popEdit', 'formDel'],
      style: 'panel-success'
    }
  };

  m.role = {
    prop: [
      m._text('title'), m._text('label', {
        valid: {
          required: true
        }
      }), m._textarea('description'), m._itemTable('menu', {
        attrs: {
          noLastTime: true,
          afterShow: function(e, p) {
            var me, mo, tb;
            me = this.findData(e);
            mo = this.form.model;
            tb = this.collection;
            return new cf.view.jsonTable({
              parent: p,
              entity: 'menu',
              style: 'panel-success',
              data: me.get('children') || [],
              formEditOpt: {
                _save: function() {
                  var c;
                  c = this.rCollection;
                  c.add(this.model);
                  me.set('children', c.toJSON());
                  mo.set('menu', tb.toJSON());
                  return this.closeDlg();
                }
              },
              formAddOpt: {
                _save: function() {
                  var c;
                  this.model.set('id', util.randomChar(4));
                  c = this.rCollection;
                  c.add(this.model);
                  me.set('children', c.toJSON());
                  mo.set('menu', tb.toJSON());
                  return this.closeDlg();
                }
              }
            });
          }
        }
      })
    ],
    btn: {
      del: function(it, e) {
        if (!['admin', 'user', 'guest'].has(it.title)) {
          return util.iBtn("trash", 'del');
        }
      },
      users: function(it) {
        if (it.title !== 'guest') {
          return util.iBtn("user");
        }
      }
    },
    event: {
      users: {
        type: 'click',
        fun: cf.view.showInTd
      }
    }
  };

}).call(this);

//# sourceMappingURL=role.js.map
